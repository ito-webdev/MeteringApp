<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>検針アプリ（カードUI版 修正版）</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- Custom CSS -->
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="assets/css/meter.css" rel="stylesheet">
</head>

<body>

  <header class="p-3 mb-4">
    <h1 class="header-title fs-4">検針アプリ（カードUI版 修正版）</h1>
  </header>

  <main class="container">
    <h2 class="fs-5 mb-3">検針一覧</h2>
    <p class="text-muted small">
      前月値/現在値/差(使用量)/前年同月/前月使用量/詳細(過去1年)/写真(撮影/選択/削除/拡大)
    </p>

    <div class="row" id="metersRow"></div>

    <div class="my-4 text-center">
      <button class="btn btn-primary px-4" id="sendBtn">サーバ送信（仮）</button>
    </div>
  </main>

  <!-- 詳細モーダル -->
  <div class="modal fade" id="detailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">過去1年分の使用量</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <ul id="historyList" class="list-group"></ul>
          </div>
          <div id="chartContainer">
            <canvas id="usageChart" width="400"></canvas>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 写真拡大表示モーダル -->
  <div class="modal fade" id="photoZoomModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <img id="zoomedPhoto" src="" alt="photo zoom">
      </div>
    </div>
  </div>

  <!-- 送信結果(ダミー)モーダル -->
  <div class="modal fade" id="sendResultModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">送信データ(ダミー)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p class="small text-muted">API送信後の結果を表示するダミー</p>
          <div id="sendOutput" class="border bg-light p-3" style="min-height:100px;"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>

  <!-- モジュール化されたJS -->
  <script type="module" src="assets/js/meters.js"></script>
  <script type="module" src="assets/js/utils/dom.js"></script>
  <script type="module" src="assets/js/ui/chart.js"></script>
  <script type="module" src="assets/js/ui/thumbnails.js"></script>
  <script type="module" src="assets/js/ui/renderMeters.js"></script>
  <script type="module" src="assets/js/app.js"></script>
</body>

</html>
